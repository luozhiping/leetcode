# 795. 区间子数组个数
# https://leetcode-cn.com/problems/number-of-subarrays-with-bounded-maximum/

class Solution(object):
    def numSubarrayBoundedMax(self, A, L, R):
        """
        :type A: List[int]
        :type L: int
        :type R: int
        :rtype: int
        """
        def findArray(cap):
            numCount = 0
            result = 0
            for num in A:
                if num <= cap:
                    numCount += 1
                    result += numCount
                else:
                    numCount = 0
            return result


        return findArray(R) - findArray(L-1)


s = Solution()
# print(s.numSubarrayBoundedMax([2, 1, 4, 3], 2, 3))


import random
test = []
l = random.randint(0, 10**3)
r = random.randint(l, 10**3)
for i in range(random.randint(400, 500)):
    test.append(random.randint(0, 10**3))
# print(test, l, r)
test = [911, 308, 938, 163, 174, 420, 900, 598, 783, 398, 693, 37, 231, 95, 187, 659, 933, 213, 437, 286, 470, 451, 922, 598, 157, 591, 206, 88, 158, 271, 684, 630, 52, 354, 398, 817, 182, 433, 891, 675, 866, 206, 750, 894, 543, 278, 619, 771, 404, 405, 354, 838, 194, 649, 809, 557, 560, 895, 464, 924, 793, 629, 870, 824, 813, 793, 171, 274, 703, 62, 730, 330, 75, 570, 175, 461, 750, 121, 711, 517, 632, 1, 870, 83, 721, 723, 704, 853, 545, 671, 549, 781, 301, 637, 422, 201, 590, 913, 9, 221, 982, 214, 711, 280, 529, 13, 655, 824, 845, 71, 991, 507, 298, 500, 650, 514, 355, 110, 104, 204, 616, 310, 198, 716, 378, 330, 117, 103, 359, 707, 300, 964, 497, 599, 972, 20, 985, 61, 850, 279, 336, 440, 37, 58, 140, 816, 133, 667, 645, 949, 947, 165, 553, 606, 618, 564, 694, 471, 100, 746, 950, 313, 631, 636, 912, 553, 966, 863, 474, 792, 20, 554, 328, 464, 848, 345, 879, 910, 495, 444, 959, 133, 771, 869, 858, 58, 343, 356, 436, 979, 106, 692, 521, 185, 768, 306, 678, 201, 1, 969, 22, 576, 3, 982, 613, 589, 318, 35, 157, 714, 90, 894, 310, 270, 879, 427, 153, 1, 663, 364, 421, 238, 296, 821, 815, 540, 113, 308, 993, 399, 269, 189, 513, 957, 12, 560, 455, 346, 194, 160, 155, 440, 605, 527, 493, 863, 657, 637, 137, 557, 147, 722, 663, 427, 821, 198, 117, 739, 155, 238, 255, 1000, 613, 122, 762, 19, 504, 72, 327, 481, 611, 669, 449, 354, 843, 878, 139, 198, 459, 537, 669, 626, 32, 314, 95, 410, 290, 678, 363, 584, 328, 370, 591, 755, 590, 571, 944, 271, 420, 204, 318, 234, 442, 984, 104, 628, 406, 315, 570, 478, 76, 633, 277, 255, 12, 506, 281, 778, 599, 997, 684, 981, 996, 740, 526, 615, 229, 930, 806, 542, 983, 848, 302, 591, 459, 799, 264, 190, 217, 462, 90, 178, 332, 246, 914, 843, 919, 728, 682, 568, 655, 533, 12, 996, 149, 576, 7, 975, 217, 1000, 155, 100, 833, 405, 91, 912, 517, 565, 812, 800, 907, 455, 140, 181, 359, 629, 502, 342, 267, 408, 490, 340, 483, 764, 116, 819, 606, 38, 514, 25, 393, 952, 719, 978, 869, 242, 295, 303, 802, 534, 261, 490, 388, 729, 570, 578, 120, 377, 213, 753, 425, 745, 362, 581, 79, 234, 320, 828, 724, 758, 109, 765, 581, 190, 899, 192, 318, 569, 271, 208, 852, 648, 77, 24, 160, 346, 834, 622, 702, 799, 665, 554, 181, 861, 489, 395, 354, 938, 328, 804, 172, 310, 879, 174, 403, 770, 394, 100, 113, 592, 805, 361, 622, 481, 883, 760, 825, 85, 323, 741, 286, 279, 854, 530, 280, 617, 398, 737, 18, 634, 184, 525, 962, 154, 309, 262, 372, 232]
l=943
r=983

print(s.numSubarrayBoundedMax(test, l, r))
